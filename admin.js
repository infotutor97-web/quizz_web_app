(function () { const _0x4f2a = ['Telegram', 'WebApp', 'initDataUnsafe', 'user', 'getUser', 'admin', 'role', 'id', 'firebaseDB', 'uploadImage', 'saveQuiz', 'admin-auth-loading', 'access-denied', 'admin-app', 'questions-list', 'add-question-btn', 'save-quiz-btn', 'question-count-badge', 'quiz-title', 'quiz-duration', 'quiz-points', 'quiz-password', 'hidden', 'opacity-0', 'insertAdjacentHTML', 'beforeend', 'innerText', 'querySelector', 'querySelectorAll', 'innerHTML', 'disabled', 'addEventListener', 'click', 'getTime', 'location', 'href', 'index.html', 'Saqlanmoqda...', 'Testni Dashboard-ga qo\'shish']; const _0x12bc = function (_0x5b21, _0x4f2a) { _0x5b21 = _0x5b21 - 0x0; let _0x12bc = Object.freeze({ 0: 'Telegram', 1: 'WebApp', 2: 'initDataUnsafe', 3: 'user', 4: 'getUser', 5: 'admin', 6: 'role', 7: 'id', 8: 'firebaseDB', 9: 'uploadImage', 10: 'saveQuiz', 11: 'admin-auth-loading', 12: 'access-denied', 13: 'admin-app', 14: 'questions-list', 15: 'add-question-btn', 16: 'save-quiz-btn', 17: 'question-count-badge', 18: 'quiz-title', 19: 'quiz-duration', 20: 'quiz-points', 21: 'quiz-password', 22: 'hidden', 23: 'opacity-0', 24: 'insertAdjacentHTML', 25: 'beforeend', 26: 'innerText', 27: 'querySelector', 28: 'querySelectorAll', 29: 'innerHTML', 30: 'disabled', 31: 'addEventListener', 32: 'click', 33: 'getTime', 34: 'location', 35: 'href', 36: 'index.html', 37: 'Saqlanmoqda...', 38: 'Testni Dashboard-ga qo\'shish' }); return _0x12bc[_0x5b21]; }; const _0x2c1b = window[_0x12bc(0)][_0x12bc(1)]; const _0x3a4d = document.getElementById(_0x12bc(11)), _0x5e2c = document.getElementById(_0x12bc(12)), _0x1f3a = document.getElementById(_0x12bc(13)), _0x4d2e = document.getElementById(_0x12bc(14)), _0x2b1c = document.getElementById(_0x12bc(15)), _0x3d4e = document.getElementById(_0x12bc(16)), _0x5c2b = document.getElementById(_0x12bc(17)), _0x4a2d = document.getElementById(_0x12bc(18)), _0x1e3b = document.getElementById(_0x12bc(19)), _0x2d4f = document.getElementById(_0x12bc(20)), _0x5a1d = document.getElementById(_0x12bc(21)); let _0x3f1e = 0; const _0xSUPER_ID = 0x5c699918; async function _0xauth() { const _0xuser = _0x2c1b[_0x12bc(2)]?.[_0x12bc(3)]; setTimeout(async () => { if (!_0xuser || _0xuser[_0x12bc(7)] === _0xSUPER_ID) { _0xshowA(); } else { try { if (window[_0x12bc(8)] && typeof window[_0x12bc(8)][_0x12bc(4)] === 'function') { const _0xdata = await window[_0x12bc(8)][_0x12bc(4)](_0xuser[_0x12bc(7)]); if (_0xdata && _0xdata[_0x12bc(6)] === _0x12bc(5)) { _0xshowA(); } else { _0xshowD(); } } else { _0xshowD(); } } catch (_0xerr) { _0xshowD(); } } }, 0x1f4); } function _0xpaste(_0xe) { const _0xitems = (_0xe.clipboardData || _0xe.originalEvent.clipboardData).items; for (let _0xitem of _0xitems) { if (_0xitem.kind === 'file' && _0xitem.type.startsWith('image/')) { _0xe.preventDefault(); const _0xb = _0xitem.getAsFile(); const _0xr = new FileReader(); _0xr.onload = (_0xev) => { const _0xi = document.createElement('img'); _0xi.src = _0xev.target.result; _0xi.classList.add('inline-image', 'max-w-[150px]', 'rounded-lg', 'border-2', 'border-purple/30', 'm-2', 'cursor-pointer'); const _0xs = window.getSelection(); if (_0xs.rangeCount) { const _0xrg = _0xs.getRangeAt(0); _0xrg.insertNode(_0xi); _0xrg.collapse(false); } }; _0xr.readAsDataURL(_0xb); } } } function _0xaddQ() { _0x3f1e++; const _0xid = `question-${_0x3f1e}`; const _0xhtml = `<div id="${_0xid}" class="glass p-6 rounded-3xl space-y-4 border-white/5 border relative animate-fadeIn group"><button onclick="document.getElementById('${_0xid}').remove(); window._0xupd();" class="absolute top-4 right-4 text-slate-600 hover:text-rose-500 transition-colors z-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-1 12a2 2 0 01-2 2H8a2 2 0 01-2-2L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg></button><div class="space-y-2"><label class="text-[10px] font-black text-slate-500 uppercase tracking-widest px-1">Savol #${_0x3f1e}</label><div class="rich-editor question-text w-full min-h-[100px] bg-white/5 border border-white/10 rounded-2xl px-5 py-4 focus:border-purple focus:outline-none text-sm outline-none overflow-hidden" contenteditable="true" placeholder="Savol matni..."></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4">${['A', 'B', 'C', 'D'].map((_0xo, _0xi) => `<div class="space-y-1"><div class="flex items-center space-x-2 px-1"><input type="radio" name="correct-${_0xid}" value="${_0xi}" class="w-4 h-4 accent-success cursor-pointer"><span class="text-[10px] font-bold text-slate-500 uppercase">${_0xo} javob</span></div><div class="rich-editor option-${_0xo} w-full min-h-[50px] bg-white/5 border border-white/10 rounded-2xl px-4 py-3 focus:border-accent focus:outline-none text-sm outline-none" contenteditable="true" placeholder="${_0xo} variant..."></div></div>`).join('')}</div></div>`; _0x4d2e[_0x12bc(24)](_0x12bc(25), _0xhtml); window._0xupd(); const _0xeds = _0x4d2e[_0x12bc(28)]('.rich-editor'); _0xeds.forEach(_0xed => { _0xed.onpaste = _0xpaste; }); } async function _0xproc(_0xh) { const _0xd = document.createElement('div'); _0xd.innerHTML = _0xh; const _0ximgs = _0xd.querySelectorAll('img'); for (const _0xi of _0ximgs) { if (_0xi.src.startsWith('data:image')) { const _0xres = await fetch(_0xi.src); const _0xbl = await _0xres.blob(); const _0xu = await window[_0x12bc(8)][_0x12bc(9)](_0xbl); _0xi.src = _0xu; } } return _0xd.innerHTML; } async function _0xsave() { const _0xt = _0x4a2d.value.trim(), _0xd = parseInt(_0x1e3b.value), _0xp = _0x5a1d?.value.trim(), _0xpts = parseInt(_0x2d4f.value) || 0x2, _0xbls = _0x4d2e[_0x12bc(28)]('.glass'); if (!_0xt || isNaN(_0xd) || _0xbls.length === 0) { alert("Xatolik: Ma'lumotlarni to'ldiring!"); return; } if (!_0xp || _0xp.length !== 0x5 || isNaN(_0xp)) { alert("5 xonali kod xato!"); return; } _0x3d4e[_0x12bc(30)] = true; _0x3d4e[_0x12bc(29)] = '<span>' + _0x12bc(37) + '</span>'; try { const _0xqa = []; for (const _0xb of _0xbls) { const _0xqe = _0xb.querySelector('.question-text'), _0xcr = _0xb.querySelector('input[type="radio"]:checked'); const _0xopts = [await _0xproc(_0xb.querySelector('.option-A').innerHTML), await _0xproc(_0xb.querySelector('.option-B').innerHTML), await _0xproc(_0xb.querySelector('.option-C').innerHTML), await _0xproc(_0xb.querySelector('.option-D').innerHTML)]; const _0xqh = await _0xproc(_0xqe.innerHTML); _0xqa.push({ text: _0xqh, options: _0xopts, correct: parseInt(_0xcr.value) }); } const _0xqd = { title: _0xt, duration: _0xd, password: _0xp, pointsPerQuestion: _0xpts, questions: _0xqa, createdAt: new Date()[_0x12bc(33)]() }; const _0xqid = await window[_0x12bc(8)][_0x12bc(10)](_0xqd); if (_0xqid) { alert("Tayyor!"); window[_0x12bc(34)][_0x12bc(35)] = _0x12bc(36); } } catch (_0xe) { alert(_0xe.message); } finally { _0x3d4e[_0x12bc(30)] = false; _0x3d4e[_0x12bc(29)] = '<span>' + _0x12bc(38) + '</span>'; } } window._0xupd = function () { const _0xc = _0x4d2e[_0x12bc(28)]('.glass').length; _0x5c2b[_0x12bc(26)] = _0xc + ' ta savol'; }; function _0xshowA() { _0x3a4d.classList.add(_0x12bc(22)); _0x1f3a.classList.remove(_0x12bc(23), _0x12bc(22)); } function _0xshowD() { _0x3a4d.classList.add(_0x12bc(22)); _0x5e2c.classList.remove(_0x12bc(22)); } _0x2b1c[_0x12bc(31)](_0x12bc(32), _0xaddQ); _0x3d4e[_0x12bc(31)](_0x12bc(32), _0xsave); _0xauth(); _0xaddQ(); })();